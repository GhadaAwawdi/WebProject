<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="lib/angular.min.js" ></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="cssIndex.css">
<!-- <link rel="stylesheet" type="text/css" href="../##/cssIndex.css">-->
<link rel="stylesheet" href="lib/bootstrap-3.3.7-dist/css/bootstrap.min.css">
<script src="lib/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
<script>
var app = angular.module('myApp', []);
app.controller('ebooksCtrl', function($scope, $http, $window,$location) {
	

	//,$location,$window,$state
	$scope.submitLogin = function (){
	    var loginData = {};
	    $("#loginForm").find("input[name]").each(function (index, node) {
	    	loginData[node.name] = node.value;
	    });
	    loginData=JSON.stringify(loginData);
	    console.log(loginData);
		
		$http.post('Login',loginData).success(function(data,status,headers,config){
			//alert("success");
			var allcookies = document.cookie;

    		cookiearray = allcookies.split(';');   
   			username = cookiearray[0].split('=')[1];
   			type = cookiearray[1].split('=')[1];
   			console.log(type);
   			if(type=="admin"){
   				window.location.href = 'homeAdmin.html';
   				console.log($location)
   				//alert("admin");
   			}
   			if(type=="user"){
   				window.location.href = 'homeUser.html';
   				//alert("user");
   			}
		})
		
		.error(function(data,status,headers,config){
			//alert("failed");
			console.log("failed");
			//$window.location.href = '/index.html';
		});
	};
	
	
	$scope.submitRegistration = function (){
	    var loginData = {};
	    var regData = {};
	     $("#registrationForm").find("input[name]").each(function (index, node) {
	         regData[node.name] = node.value;
	     });
	     console.log(regData);
	     regData=JSON.stringify(regData);
		
		$http.post('SignUp',regData).success(function(data,status,headers,config){
			//alert("success");
// 			var allcookies = document.cookie;
//     		cookiearray = allcookies.split(';');   
//    			username = cookiearray[0].split('=')[1];
//    			type = cookiearray[1].split('=')[1];
//    			//console.log(type,username);
//    			if(type=="admin"){
   				
//    				//$location.path('/NewFile.html');
//    			}
//    			else{
//    				//$location.replace = '/books.html';
//    			}
//			alert("success");
		})
		.error(function(data,status,headers,config){
			//alert("failed");
			console.log("failed");
			//$window.location.href = '/index.html';
		});
	};
});



</script>


</head>
<body data-ng-app="myApp" data-ng-controller="ebooksCtrl">
<div class="container">
	<div class="row">
		<h2> BooksForAll </h2>
	</div>
</div>


<br>
<br>

<div class="container">
<div class="row">
<div class="col-md-6 col-md-offset-6">
<div class="form-body">
    <ul class="nav nav-tabs final-login">
        <li class="active"><a data-toggle="tab" href="#sectionA">Sign In</a></li>
        <li><a data-toggle="tab" href="#sectionB">Join us!</a></li>
    </ul>
    <div class="tab-content">
        <div id="sectionA" class="tab-pane fade in active">
        
        
        
        
        <div class="login-page">
		<div class="form">
		        <div class="innter-form">
		
			<h3>Login to your account</h3>
			<form class="login-form" id="loginForm">
			<label>Username</label>
            <input type="text" name="username" id="ex" autofocus required>            
           	
            <label>Password</label>
            <input type="password" name="password" required>
            
            <input type="submit" data-ng-click="submitLogin()" value="Sign In"/>

            <a href="#">Forgot Password?</a>

			</form>
		</div>
	</div>
	</div>
        
        
        

            
            <div class="clearfix"></div>
        </div>
        <div id="sectionB" class="tab-pane fade">
			<div class="innter-form">
            <form class="sa-innate-form" id="registrationForm" data-ng-submit="submitRegistration()">
            <label>Username</label>
            <input type="text" name="username" maxlength="10" autofocus required>            
            <label>Email</label>
            <input type="email" name="email" autocomplete="on" required>            
            <label>City</label>
            <input type="text" name="city" pattern=".{3,}[A-Za-z\s]+" required title="4 characters minimum">
            <label>Street</label>
            <input type="text" name="street" pattern=".{3,}" required title="4 characters minimum">
            <label>Apartment Number</label>
            <input type="number" name="apartment" min="1" required  id="ex">
            <label>Postal Code</label>
            <input type="text" name="postalCode" required pattern="[0-9]{7}">
            <label>Telephone Number</label>
            <input type="text" name="telephoneNumber" >
            <label>Password</label>
            <input type="password" name="password" maxlength="8" required>
            <label>Nickname</label>
            <input type="text" name="nickname" maxlength="20" required>
            <label>Description</label>
            <input type="text" name="shortDescription" maxlength="50">
            <label>Photo</label>
	        <input type="url" name="photo">
<!--        <input type="file" name="photo" accept="image/x-png,image/gif,image/jpeg" /> -->
			<br>
            <input type="submit" value="Join now"  >
            </form>
            </div>
            
        </div>
        </div>
    </div>
    </div>
    </div>
    </div>

</body>
</html>